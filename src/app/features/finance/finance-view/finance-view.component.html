<div class="p-6">
  <h1 class="text-2xl font-bold mb-6">Approved Trips</h1>
  <mat-table [dataSource]="approvedTrips" class="w-full">
    <ng-container matColumnDef="name">
      <mat-header-cell *matHeaderCellDef>Trip Name</mat-header-cell>
      <mat-cell *matCellDef="let trip">{{trip.name}}</mat-cell>
    </ng-container>
 
    <ng-container matColumnDef="user">
      <mat-header-cell *matHeaderCellDef>User</mat-header-cell>
      <mat-cell *matCellDef="let trip">{{trip.userId}}</mat-cell>
    </ng-container>
 
    <ng-container matColumnDef="dates">
      <mat-header-cell *matHeaderCellDef>Dates</mat-header-cell>
      <mat-cell *matCellDef="let trip">
        {{trip.startDate | date}} - {{trip.endDate | date}}
        ({{trip.duration}} days)
      </mat-cell>
    </ng-container>
 
    <ng-container matColumnDef="totalAmount">
      <mat-header-cell *matHeaderCellDef>Total Amount</mat-header-cell>
      <mat-cell *matCellDef="let trip">
        {{calculateTotalAmount(trip) | currency}}
      </mat-cell>
    </ng-container>
    <ng-container matColumnDef="actions">
      <mat-header-cell *matHeaderCellDef>Actions</mat-header-cell>  
      <mat-cell *matCellDef="let trip">
        @if (!trip.refundStatus) {
          <div class="flex gap-2">
            <button mat-icon-button (click)="updateStatus(trip, RefundStatus.IN_PROCESS)" matTooltip="Mark as In Process">
              <mat-icon>pending</mat-icon>  
            </button>
            <button mat-icon-button (click)="updateStatus(trip, RefundStatus.REFUNDED)" matTooltip="Mark as Refunded">
              <mat-icon>done_all</mat-icon>
            </button>
          </div>
        } @else {
          <div class="flex items-center">
            <mat-icon [class]="getStatusClass(trip.refundStatus)">
              {{getStatusIcon(trip.refundStatus)}}
            </mat-icon>
            <span class="ml-2">{{trip.refundStatus}}</span>
          </div>
        }
      </mat-cell>
     </ng-container>
    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
    <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
  </mat-table>
 </div>
 